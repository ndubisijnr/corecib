{"remainingRequest":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/clark/Desktop/business.corestep.com/src/components/form/PayoutForm.vue?vue&type=style&index=0&id=6af2e975&scoped=true&lang=css&","dependencies":[{"path":"/Users/clark/Desktop/business.corestep.com/src/components/form/PayoutForm.vue","mtime":1683674085742},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/css-loader/dist/cjs.js","mtime":1670880042824},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1670880044043},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/postcss-loader/src/index.js","mtime":1670880043297},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/cache-loader/dist/cjs.js","mtime":1670880017776},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js","mtime":1670880044043}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jYXJkLWhlYWR7CiAgY29sb3I6IHdoaXRlOwp9Cg=="},{"version":3,"sources":["PayoutForm.vue"],"names":[],"mappings":";AAkMA;AACA;AACA","file":"PayoutForm.vue","sourceRoot":"src/components/form","sourcesContent":["<template>\n    <modal-1 :show=\"showCreatePayout && showModal\" body-classes=\"p-1\" modal-classes=\"modal-dialog-centered modal-md\">\n        <div>\n          <div class=\"card-head\">\n            <div class=\"d-flex justify-content-between\">\n              <h4 style=\"font-size:18px;font-weight:700;width: 100%;display: flex;justify-content: center;align-items: center\">Request Payout</h4>\n              <button type=\"button\" class=\"btn-close p-2 m-2\" @click=\"closeModal()\" title=\"Cancel Request Payout\"></button>\n            </div>\n          </div>\n\n          <div class=\"card-body\">\n                <div class=\"container\">\n                    <b-form class=\"\" @submit.prevent=\"requestPayout()\">\n                        <h4 class=\"text-left\">Wallet Balance: â‚¦{{ balances.walletBalance.accountBalance | formatAmount\n                        }}\n                        </h4>\n                        <b-input-group size=\"md\" prepend=\"NGN\" class=\"mb-3\">\n                            <b-form-input id='withdrawInput' type=\"text\" autofocus\n                                v-model=\"payoutModel.payoutAmount\" style=\"font-size:16px;letter-spacing:.2rem;\"\n                                placeholder=\"Enter Amount\" @input=\"formatInputValue\"></b-form-input>\n                        </b-input-group>\n                        <h4 id=\"error\" class=\"text-danger text-center\"></h4>\n                        <b-button v-if=\"currentOrganisation.organisationStage == 'PROD'\" class=\"text-white\" type=\"submit\" :style=\"{backgroundColor:primaryColor,width:'100%'}\">{{ accLoading ? 'please wait..' : 'withdraw' }} <span :class=\"{ 'spinner-border': accLoading }\"></span>\n                        </b-button>\n                        <b-button v-else disabled :style=\"{backgroundColor:primaryColor,color:'white',width:'100%'}\">You are in Test Mode</b-button>\n                    </b-form>\n                </div>\n            </div>\n        </div>\n\n    </modal-1>\n\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport StoreUtils from \"../../util/baseUtils/StoreUtils\";\nimport Swal from \"sweetalert2\";\nimport AccountPayoutRequest from \"../../model/request/AccountPayoutRequest\"\nconst Toast = Swal.mixin({\n  toast: true,\n  position: \"top-end\",\n  showConfirmButton: false,\n  timer: 3000,\n  timerProgressBar: true,\n  didOpen: (toast) => {\n    toast.addEventListener(\"mouseenter\", Swal.stopTimer);\n    toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n  },\n});\nexport default {\n    name: \"PayoutForm\",\n    props: {\n        showCreatePayout: Boolean,\n    },\n    directives: {\n      formatNumber: {\n        bind(el) {\n          const formatter = new Intl.NumberFormat('en-US',{ maximumFractionDigits: 3, minimumFractionDigits: 2 });\n          const inputHandler = (event) => {\n            let value = event.target.value.replace(/,/g, '');\n            event.target.value = formatter.format(value);\n          };\n          el.addEventListener('input', inputHandler);\n        }\n      }\n    },\n    data() {\n        return {\n            showModal: true,\n            payoutModel: AccountPayoutRequest.createPayout,\n            amount:null,\n            primaryColor:window.__env.app.primaryColor\n\n\n        }\n    },\n    methods: {\n      formatInputValue() {\n        let value = this.payoutModel.payoutAmount\n        const parsedValue = parseFloat(value.replace(/[^\\d.-]/g, \"\"));\n        if (!isNaN(parsedValue)) this.payoutModel.payoutAmount = parsedValue.toLocaleString();\n      },\n      formatAmount(value){\n        if (value == null) return '0.00'\n        value = parseFloat(value).toFixed(2);\n        const parts = value.toString().split(\".\");\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        return parts.join(\".\");\n      },\n\n      // inputLimiter() {\n      //   let input = document.getElementById('withdrawInput')\n      //   let value = input.value\n      //   if(value) {\n      //     // value = parseFloat(value).toFixed(2)\n      //     const parts = parseFloat(value.toString()).toFixed(2).split(\",\")\n      //     parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n      //     this.payoutModel.payoutAmount = parts.join(\".\")\n      //     console.log(parts.join(\".\"))\n      //\n      //   }\n      //   console.log(this.payoutModel.payoutAmount)\n      //\n      //   // let AllowableCharacters = '';\n      //   //\n      //   // if (allow == 'custom'){AllowableCharacters=' 1234567890.';}\n      //   //\n      //   //\n      //   // let k = document.all?parseInt(e.keyCode): parseInt(e.which);\n      //   // if (k!=13 && k!=8 && k!=0){\n      //   //   if ((e.ctrlKey==false) && (e.altKey==false)) {\n      //   //     return (AllowableCharacters.indexOf(String.fromCharCode(k))!=-1);\n      //   //   } else {\n      //   //     return true;\n      //   //   }\n      //   // } else {\n      //   //   return true;\n      //   // }\n      //\n      // },\n\n      isNumber: function (evt) {\n        evt = evt ? evt : window.event;\n        const charCode = evt.which ? evt.which : evt.keyCode;\n        if (\n            charCode > 31 &&\n            (charCode < 48 || charCode > 57) &&\n            charCode !== 46\n        ) {\n          evt.preventDefault();\n        } else {\n          return true;\n        }\n      },\n\n      closeModal() {\n            //close modal form\n            this.showModal = false;\n            this.$emit(\"closeCreatePayout\", false);\n            this.showModal = true;\n            //   StoreUtils.commit(StoreUtils.mutations.accountPayout.updateStatus, 'false')\n        },\n\n      requestPayout() {\n          let amount = this.payoutModel.payoutAmount\n          this.payoutModel.payoutAmount = amount.replace(/[^\\d.-]/g, \"\")\n          this.payoutModel.payoutReference = `BIZGEM-${this.reference(30)}`\n          if(Number(amount.replace(/[^\\d.-]/g, \"\")) > Number(1000000)){\n            this.payoutModel.payoutAmount = null\n            Toast.fire({text:\"maximum of 1,000,000\", icon:\"error\"})\n          }\n          else if(Number(amount.replace(/[^\\d.-]/g, \"\")) >  Number(this.balances.walletBalance.accountBalance)) {\n            this.payoutModel.payoutAmount = null\n            Toast.fire({text: \"Insufficent Funds\", icon: \"error\"})\n          }\n          else{\n            StoreUtils.dispatch(StoreUtils.actions.accountPayout.requestPayout, this.payoutModel).then(() => {\n              this.payoutModel.payoutAmount = null\n              this.closeModal()\n              StoreUtils.dispatch(StoreUtils.actions.accountPayout.readPayout, this.payoutTransactionsModel)\n            })\n          }\n      },\n\n      reference(length) {\n          let result = \"\"\n          let characters = 'abcdefghijklmnopgrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ0123456789';\n          let charactersLength = characters.length;\n          for (var i = 0; i < length; i++) {\n              result += characters.charAt(Math.floor(Math.random() * charactersLength));\n          }\n          return result;\n      },\n    },\n    computed: {\n        ...mapState({\n            accLoading: state => state.accountPayout.accloading,\n            balances: state => state.auth.balances\n\n        }),\n        currentOrganisation() {\n            return StoreUtils.rootGetters(StoreUtils.getters.auth.getCurrentOrganization)\n        },\n\n\n\n\n    },\n    mounted(){}\n\n}\n</script>\n\n<style scoped>\n.card-head{\n  color: white;\n}\n</style>"]}]}