{"remainingRequest":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/clark/Desktop/business.corestep.com/src/components/form/FundTransferForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/clark/Desktop/business.corestep.com/src/components/form/FundTransferForm.vue","mtime":1709727379076},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/cache-loader/dist/cjs.js","mtime":1670880017776},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/babel-loader/lib/index.js","mtime":1670880017786},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/cache-loader/dist/cjs.js","mtime":1670880017776},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js","mtime":1670880044043}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7bWFwU3RhdGV9IGZyb20gInZ1ZXgiOwppbXBvcnQgU3RvcmVVdGlscyBmcm9tICIuLi8uLi91dGlsL2Jhc2VVdGlscy9TdG9yZVV0aWxzIjsKaW1wb3J0IEZ1bmRUcmFuc2ZlclJlcXVlc3QgZnJvbSAiLi4vLi4vbW9kZWwvcmVxdWVzdC9GdW5kVHJhbnNmZXJSZXF1ZXN0IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRnVuZFRyYW5zZmVyRm9ybSIsCiAgcHJvcHM6IHsKICAgIHNob3dGdW5kVHJhbnNmZXI6IEJvb2xlYW4sCiAgfSwKICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHNob3dNb2RhbDogdHJ1ZSwKICAgICAgICBiYW5rczogW10sCiAgICAgICAgbmFtZUVucXVpcnlNb2RlbDpGdW5kVHJhbnNmZXJSZXF1ZXN0Lm5hbWVFbnF1aXJ5LAogICAgICAgIGZ1bmRUcmFuc2Zlck1vZGVsOkZ1bmRUcmFuc2ZlclJlcXVlc3QuZnVuZFRyYW5zZmVyLAogICAgICAgIGVycm9yTWVzc2FnZTpudWxsLAogICAgICAgIGJhbmtOYW1lOm51bGwsCiAgICAgICAgcGFyZW50TmFtZTpudWxsCiAgICAgIH0KICAgIH0sCiAgbWV0aG9kczogewoKICAgIHNldFN0YWdlRm9yd2FyZCgpewogICAgICBTdG9yZVV0aWxzLmNvbW1pdChTdG9yZVV0aWxzLm11dGF0aW9ucy5mdW5kVHJhbnNmZXIudXBkYXRlU3RhZ2UsJ3RyYW5zZmVyJykKICAgICAgdGhpcy5kb05hbWVFbnF1aXJ5T25QYXJlbnREZWJpdEFjY291bnQoKQogICAgfSwKCiAgICBzZXRTdGFnZUJhY2soKXsKICAgICAgU3RvcmVVdGlscy5jb21taXQoU3RvcmVVdGlscy5tdXRhdGlvbnMuZnVuZFRyYW5zZmVyLnVwZGF0ZVN0YWdlLCduYW1lRW5xdWlyeScpCgogICAgfSwKCiAgICBkb0Z1bmRUcmFuc2ZlcigpewogICAgICBsZXQgU3BsaXRCYW5rTmFtZTsKCiAgICAgIGlmKHRoaXMuYmFua05hbWUpewogICAgICAgIGxldCBiYW5rQXJyYXkgPSB0aGlzLmJhbmtOYW1lPy5zcGxpdCgiICIpCiAgICAgICAgbGV0IGJhbmtDb2RlID1iYW5rQXJyYXlbYmFua0FycmF5Py5sZW5ndGgtMV07CiAgICAgICAgU3BsaXRCYW5rTmFtZT0gdGhpcy5iYW5rTmFtZT8ucmVwbGFjZShiYW5rQ29kZSwiIikudHJpbSgpOwogICAgICB9ZWxzZXt9CgoKICAgICAgdGhpcy5mdW5kVHJhbnNmZXJNb2RlbC5jcmVkaXRBY2NvdW50TmFtZSA9IHRoaXMuaXNTZW5kaW5nVG8gPyB0aGlzLmNvcmVTdGVwQWNjb3VudD8uYWNjb3VudE5hbWUgOiB0aGlzLm5hbWVFbnF1aXJ5RGV0YWlscz8uYWNjb3VudE5hbWUKICAgICAgdGhpcy5mdW5kVHJhbnNmZXJNb2RlbC5jcmVkaXRBY2NvdW50TnVtYmVyID0gdGhpcy5pc1NlbmRpbmdUbyA/IHRoaXMuY29yZVN0ZXBBY2NvdW50Py5hY2NvdW50TnVtYmVyIDogdGhpcy5uYW1lRW5xdWlyeURldGFpbHM/LmFjY291bnROdW1iZXIKICAgICAgdGhpcy5mdW5kVHJhbnNmZXJNb2RlbC5kZWJpdEFjY291bnROYW1lID0gdGhpcy5kZWJpdEFjY291bnROYW1lRW5xdWlyeT8uYWNjb3VudE5hbWUKICAgICAgdGhpcy5mdW5kVHJhbnNmZXJNb2RlbC5kZWJpdEFjY291bnROdW1iZXIgPSB0aGlzLmRlYml0QWNjb3VudE5hbWVFbnF1aXJ5Py5hY2NvdW50TnVtYmVyCiAgICAgIHRoaXMuZnVuZFRyYW5zZmVyTW9kZWwuYmFua05hbWUgPSB0aGlzLmlzU2VuZGluZ1RvID8gIkNPUkVTVEVQIE1JQ1JPRklOQU5DRSBCQU5LIiA6IFNwbGl0QmFua05hbWUKICAgICAgdGhpcy5mdW5kVHJhbnNmZXJNb2RlbC5iYW5rQ29kZSA9IHRoaXMuaXNTZW5kaW5nVG8gPyAiMDAwMDAwIiA6IHRoaXMubmFtZUVucXVpcnlEZXRhaWxzPy5iYW5rQ29kZQogICAgICB0aGlzLmZ1bmRUcmFuc2Zlck1vZGVsLnNlc3Npb25JZCA9IHRoaXMuaXNTZW5kaW5nVG8gPyB0aGlzLmNvcmVTdGVwQWNjb3VudD8uc2Vzc2lvbklkIDp0aGlzLm5hbWVFbnF1aXJ5RGV0YWlscz8uc2Vzc2lvbklkCiAgICAgIHRoaXMuZnVuZFRyYW5zZmVyTW9kZWwuc291cmNlVHlwZSAgPSAgIldFQiIKICAgICAgdGhpcy5mdW5kVHJhbnNmZXJNb2RlbC5yZWZlcmVuY2UgPSBgQ09SRS1TVEVQLSR7dGhpcy5yZWZlcmVuY2UoMzApfWAKICAgICAgU3RvcmVVdGlscy5kaXNwYXRjaChTdG9yZVV0aWxzLmFjdGlvbnMuZnVuZFRyYW5zZmVyLmZ1bmRUcmFuc2ZlcikudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCkKICAgICAgfSkKICAgIH0sCgogICAgZG9OYW1lRW5xdWlyeU9uRGViaXRBY2NvdW50KCl7CiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlYml0QWNjb3VudE51bWJlcicpCiAgICAgIHRoaXMubmFtZUVucXVpcnlNb2RlbC5hY2NvdW50QmFua0NvZGUgPSAnMDAwMDAwJwogICAgICBpZihpbnB1dC52YWx1ZS5sZW5ndGggPT0gMTApIHsKICAgICAgICB0aGlzLm5hbWVFbnF1aXJ5TW9kZWwuYWNjb3VudE51bWJlciA9IGlucHV0LnZhbHVlCiAgICAgICAgU3RvcmVVdGlscy5kaXNwYXRjaChTdG9yZVV0aWxzLmFjdGlvbnMuZnVuZFRyYW5zZmVyLmNhbGxOYW1lRW5xdWlyeSkKICAgICAgfQogICAgICBlbHNlIGlmKGlzTmFOKGlucHV0LnZhbHVlKSl7CiAgICAgICAgaW5wdXQuc3R5bGUuYm9yZGVyID0gInNvbGlkIGNyaW1zb24iCiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2U9ICdwbGVhc2UgaW5wdXQgbnVtYmVycycKICAgICAgfSBlbHNlewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gbnVsbAogICAgICB9CiAgICB9LAoKICAgIGRvTmFtZUVucXVpcnlPblBhcmVudERlYml0QWNjb3VudCgpewogICAgICB0aGlzLm5hbWVFbnF1aXJ5TW9kZWwuYWNjb3VudEJhbmtDb2RlID0gJzAwMDAwMCcKICAgICAgdGhpcy5uYW1lRW5xdWlyeU1vZGVsLmFjY291bnROdW1iZXIgPSB0aGlzLmN1cnJlbnRPcmdhbmlzYXRpb24/Lm9yZ2FuaXNhdGlvblN0YWdlID09PSAnREVWJyA/IHRoaXMuY3VycmVudE9yZ2FuaXNhdGlvbj8ub3JnYW5pc2F0aW9uQWNjb3VudE51bWJlcj8uc3BsaXQoJywnKVsxXSA6IHRoaXMuY3VycmVudE9yZ2FuaXNhdGlvbj8ub3JnYW5pc2F0aW9uQWNjb3VudE51bWJlcj8uc3BsaXQoJywnKVswXQogICAgICBTdG9yZVV0aWxzLmRpc3BhdGNoKFN0b3JlVXRpbHMuYWN0aW9ucy5mdW5kVHJhbnNmZXIuY2FsbE5hbWVFbnF1aXJ5KQogICAgfSwKCiAgICBkb05hbWVFbnF1aXJ5KCl7CiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY291bnQtbnVtYmVyJykKCiAgICAgIGlmKHRoaXMuaXNTZW5kaW5nVG8pewogICAgICAgIC8vIGxldCBDb3JlU3RlcCA9IHRoaXMuYmFua0xpc3QuZmlsdGVyKGl0ID0+IGl0Lm5hbWUgPT09ICdDT1JFU1RFUCBNSUNST0ZJTkFOQ0UgQkFOSycpCiAgICAgICAgLy8gbGV0IGJhbmtDb2RlID0gQ29yZVN0ZXAubWFwKGl0ZW0gPT4gaXRlbS5jb2RlKS50b0xvY2FsZVN0cmluZygpCiAgICAgICAgLy8gY29uc29sZS5sb2coYmFua0NvZGUpCiAgICAgICAgdGhpcy5uYW1lRW5xdWlyeU1vZGVsLmFjY291bnRCYW5rQ29kZSA9ICcwMDAwMDAnCiAgICAgICAgaWYoaW5wdXQudmFsdWUubGVuZ3RoID09IDEwKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dC52YWx1ZSkKICAgICAgICAgIHRoaXMubmFtZUVucXVpcnlNb2RlbC5hY2NvdW50TnVtYmVyID0gaW5wdXQudmFsdWUKICAgICAgICAgIFN0b3JlVXRpbHMuZGlzcGF0Y2goU3RvcmVVdGlscy5hY3Rpb25zLmZ1bmRUcmFuc2Zlci5jYWxsTmFtZUVucXVpcnkpCiAgICAgICAgfWNvbnNvbGUubG9nKGlucHV0LnZhbHVlKQogICAgICB9ZWxzZSBpZighdGhpcy5pc1NlbmRpbmdUbyl7CiAgICAgICAgbGV0IGJhbmtBcnJheSA9IHRoaXMuYmFua05hbWUuc3BsaXQoIiAiKQogICAgICAgIGxldCBiYW5rQ29kZSA9IGJhbmtBcnJheVtiYW5rQXJyYXkubGVuZ3RoIC0gMV07CiAgICAgICAgdGhpcy5uYW1lRW5xdWlyeU1vZGVsLmFjY291bnRCYW5rQ29kZSA9IGJhbmtDb2RlCiAgICAgICAgaWYoaW5wdXQudmFsdWUubGVuZ3RoID09IDEwKSB7CiAgICAgICAgICB0aGlzLm5hbWVFbnF1aXJ5TW9kZWwuYWNjb3VudE51bWJlciA9IGlucHV0LnZhbHVlCiAgICAgICAgICBTdG9yZVV0aWxzLmRpc3BhdGNoKFN0b3JlVXRpbHMuYWN0aW9ucy5mdW5kVHJhbnNmZXIuY2FsbE5hbWVFbnF1aXJ5KQogICAgICAgIH0KICAgICAgfQogICAgICBlbHNlewogICAgICAgIGlmKGlzTmFOKGlucHV0LnZhbHVlKSl7CiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZT0gJ3BsZWFzZSBpbnB1dCBudW1iZXJzJwogICAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2U9IG51bGwKICAgICAgICB9CiAgICAgIH0KCgoKICAgIH0sCgogICAgY2xvc2VNb2RhbCgpIHsKICAgICAgLy9jbG9zZSBtb2RhbCBmb3JtCiAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlRnVuZFRyYW5zZmVyRm9ybSIsIGZhbHNlKTsKICAgICAgdGhpcy5zaG93TW9kYWwgPSB0cnVlOwogICAgICBTdG9yZVV0aWxzLmNvbW1pdChTdG9yZVV0aWxzLm11dGF0aW9ucy5mdW5kVHJhbnNmZXIudXBkYXRlQ2xvc2VNb2RhbCwgZmFsc2UpCiAgICAgIFN0b3JlVXRpbHMuY29tbWl0KFN0b3JlVXRpbHMubXV0YXRpb25zLmZ1bmRUcmFuc2Zlci51cGRhdGVEZWJpdEFjY291bnROYW1lRW5xdWlyeSwgbnVsbCkKICAgICAgU3RvcmVVdGlscy5jb21taXQoU3RvcmVVdGlscy5tdXRhdGlvbnMuZnVuZFRyYW5zZmVyLnVwZGF0ZUNvcmVTdGVwQ3JlZGl0QWNjb3VudCwgbnVsbCkKICAgICAgU3RvcmVVdGlscy5jb21taXQoU3RvcmVVdGlscy5tdXRhdGlvbnMuZnVuZFRyYW5zZmVyLnVwZGF0ZU5hbWVFbnF1aXJ5LCBudWxsKQogICAgICBTdG9yZVV0aWxzLmNvbW1pdChTdG9yZVV0aWxzLm11dGF0aW9ucy5mdW5kVHJhbnNmZXIudXBkYXRlU2VuZGluZ1RvLCBudWxsKQogICAgICBTdG9yZVV0aWxzLmNvbW1pdChTdG9yZVV0aWxzLm11dGF0aW9ucy5mdW5kVHJhbnNmZXIudXBkYXRlU3RhZ2UsJ25hbWVFbnF1aXJ5JykKICAgICAgT2JqZWN0LmtleXModGhpcy5mdW5kVHJhbnNmZXJNb2RlbCkuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgdGhpcy5mdW5kVHJhbnNmZXJNb2RlbFtrZXldID0gbnVsbAogICAgICB9KQogICAgfSwKCiAgICByZWZlcmVuY2UobGVuZ3RoKSB7CiAgICAgIGxldCByZXN1bHQgPSAiIgogICAgICBsZXQgY2hhcmFjdGVycyA9ICdhYmNkZWZnaGlqa2xtbm9wZ3JzdHV2d3h5ekFCQ0RFRkpISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSc7CiAgICAgIGxldCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAoKICB9LAogIHdhdGNoOiB7CgogICAgYmFua0xpc3QobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGlmICh0aGlzLmJhbmtMaXN0Lmxlbmd0aCAhPT0gMCkgewogICAgICAgIC8vaWYodGhpcy5iYW5rTGlzdC5kYXRhLmxlbmd0aCE9PTApewogICAgICAgIGxldCBiYW5rID0gW107CiAgICAgICAgYmFuayA9IHRoaXMuYmFua0xpc3Q7CiAgICAgICAgdGhpcy5iYW5rcyA9IGJhbmsubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogYCR7aXRlbS5uYW1lfSAke2l0ZW0uY29kZX1gLAogICAgICAgICAgICBsYWJlbDogYCR7aXRlbS5uYW1lfWAsCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCgoKICBjb21wdXRlZDp7CiAgICAuLi5tYXBTdGF0ZSh7CiAgICAgIGJhbmtMaXN0OiAoc3RhdGUpID0+IHN0YXRlLnZpcnR1YWxBY2NvdW50LmJhbmtMaXN0LAogICAgICBuYW1lRW5xdWlyeURldGFpbHM6KHN0YXRlKSA9PiBzdGF0ZS5mdW5kVHJhbnNmZXIubmFtZUVucXVpcnksCiAgICAgIGRlYml0QWNjb3VudE5hbWVFbnF1aXJ5OihzdGF0ZSkgPT4gc3RhdGUuZnVuZFRyYW5zZmVyLmRlYml0QWNjb3VudE5hbWVFbnF1aXJ5LAogICAgICBsb2FkaW5nOihzdGF0ZSkgPT4gc3RhdGUuZnVuZFRyYW5zZmVyLmxvYWRpbmcsCiAgICAgIGxvYWRpbmcyOihzdGF0ZSkgPT4gc3RhdGUuZnVuZFRyYW5zZmVyLmxvYWRpbmcyLAogICAgICBpc1NlbmRpbmdUbzpzdGF0ZSA9PiBzdGF0ZS5mdW5kVHJhbnNmZXIuc2VuZGluZ1RvLAogICAgICBzaG93TW9kYWw6c3RhdGUgPT4gc3RhdGUuZnVuZFRyYW5zZmVyLmNsb3NlTW9kYWwsCiAgICAgIHN0YWdlOnN0YXRlID0+c3RhdGUuZnVuZFRyYW5zZmVyLnN0YWdlLAogICAgICBjb3JlU3RlcEFjY291bnQ6c3RhdGUgPT4gc3RhdGUuZnVuZFRyYW5zZmVyLmNvcmVTdGVwQ3JlZGl0QWNjb3VudAoKCgogICAgfSksCiAgICBjdXJyZW50T3JnYW5pc2F0aW9uKCkgewogICAgICByZXR1cm4gU3RvcmVVdGlscy5yb290R2V0dGVycyhTdG9yZVV0aWxzLmdldHRlcnMuYXV0aC5nZXRDdXJyZW50T3JnYW5pemF0aW9uKQogICAgfSwKICB9LAoKICBtb3VudGVkKCkgewogICAgU3RvcmVVdGlscy5kaXNwYXRjaChTdG9yZVV0aWxzLmFjdGlvbnMudmlydHVhbEFjY291bnQudXBkYXRlUmVhZEJhbmtMaXN0KS50aGVuKCk7CiAgfQoKfQo="},{"version":3,"sources":["FundTransferForm.vue"],"names":[],"mappings":";AAuEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"FundTransferForm.vue","sourceRoot":"src/components/form","sourcesContent":["<template>\n  <modal-1 :show=\"showFundTransfer && showModal\" body-classes=\"p-1\" modal-classes=\"modal-dialog-centered modal-md\">\n    <div>\n      <div class=\"card-head\">\n        <div class=\"d-flex justify-content-between\">\n          <h4  style=\"padding:10px;color:#413d52;font-size:14px;font-weight:700;width: 100%;text-align: center\">Fund Transfer To {{isSendingTo ? \"Tax Bank\" :  \"Other Banks\"}}</h4>\n          <button type=\"button\" class=\"btn-close p-2 m-2\" @click=\"closeModal()\" title=\"Cancel Add Payout Bank\"></button>\n        </div>\n      </div>\n      <div class=\"card-body\">\n        <div class=\"form\">\n          <b-form class=\"bform2 text-left\" @submit.prevent=\"doFundTransfer()\">\n            <div v-if=\"stage == 'nameEnquiry'\">\n              <b-form-group id=\"input-group-3\" label=\"Credit Bank Name\" label-for=\"input-3\" v-show=\"!isSendingTo\">\n                <base-input>\n                  <el-select class=\"select-danger\" filterable placeholder=\"Bank Name\" required v-model=\"bankName\">\n                    <el-option v-for=\"bank in banks\" class=\"select-danger\" :value=\"bank.value\" :label=\"bank.label\" :key=\"bank.value\"></el-option>\n                  </el-select>\n                </base-input>\n              </b-form-group>\n\n              <b-form-group id=\"input-group-4\" label=\"Credit Account Number\" label-for=\"input-group-4\">\n                <b-form-input @input=\"doNameEnquiry\"  :disabled=\"loading\" maxLength=\"10\" :value=\"isSendingTo ? coreStepAccount?.accountNumber : nameEnquiryDetails?.accountNumber\"  id=\"account-number\" type=\"text\" placeholder=\"Account Number\"  class=\"mr-2\" ></b-form-input>\n                <h6>{{errorMessage}}</h6>\n              </b-form-group>\n\n              <span v-show=\"loading\" class=\"small text-success\">Fetching account details</span> <span v-show=\"loading\" class=\"small spinner-border\"></span>\n              <b-form-group id=\"input-group-5\" label=\"Credit Account Name\" label-for=\"input-5\">\n                <b-form-input readonly id=\"input-5\" :value=\"isSendingTo ? coreStepAccount?.accountName : nameEnquiryDetails?.accountName\" type=\"text\" placeholder=\"Account Name Will Appear Here\"  class=\"mr-2\" required></b-form-input>\n              </b-form-group>\n\n              <b-button class=\"w-100 text-black\" :disabled=\"isSendingTo ? !coreStepAccount?.accountName : !nameEnquiryDetails?.accountName\" @click=\"setStageForward\" type=\"submit\">Continue</b-button>\n\n            </div>\n\n            <div v-else>\n              <b-form-group  id=\"input-group-4\" label=\"Debit Wallet Account Number\" label-for=\"input-4\">\n                <b-form-input @change=\"doNameEnquiryOnDebitAccount\" :disabled=\"loading\" @input=\"doNameEnquiryOnDebitAccount\" id=\"debitAccountNumber\" :value=\"debitAccountNameEnquiry?.accountNumber ? debitAccountNameEnquiry?.accountNumber :this.currentOrganisation?.organisationStage === 'DEV' ? this.currentOrganisation?.organisationAccountNumber?.split(',')[1] : this.currentOrganisation?.organisationAccountNumber?.split(',')[0]\" maxLength=\"10\" type=\"text\" placeholder=\"Wallet Account Number\"  class=\"mr-2\"></b-form-input>\n                <h6>{{errorMessage}}</h6>\n              </b-form-group>\n\n              <span v-show=\"loading\" class=\"small text-success\">Fetching account details</span> <span v-show=\"loading\" class=\"small spinner-border\"></span>\n              <b-form-group id=\"input-group-9\" label=\"Debit Wallet Account Name\" label-for=\"input-4\">\n                <b-form-input  :value=\"debitAccountNameEnquiry?.accountName \" id=\"text\" readonly type=\"text\" placeholder=\"Wallet Account Name will appear here\"  class=\"mr-2\" required></b-form-input>\n              </b-form-group>\n\n              <b-form-group id=\"input-group-7\" label=\"Amount\" label-for=\"input-4\">\n                <b-form-input v-model=\"fundTransferModel.amount\" id=\"amount\" type=\"text\" placeholder=\"Enter Amount\"  class=\"mr-2\" required></b-form-input>\n              </b-form-group>\n\n              <b-form-group id=\"input-group-6\" label=\"Narration\" label-for=\"input-5\" >\n                <b-form-textarea v-model=\"fundTransferModel.narration\"  type=\"text\" placeholder=\"Narration\"  class=\"mr-2\" required></b-form-textarea>\n              </b-form-group>\n\n              <div class=\"d-flex\">\n                <b-button class=\"w-100 text-black\" @click=\"setStageBack\">Back</b-button>\n                <b-button class=\"w-100 text-black\" type=\"submit\" :disabled=\"loading2\">{{loading2 ? \"Working\" : \"Proceed\" }}\n                  <span :class=\"{ 'spinner-border': loading2 }\"></span>\n                </b-button>\n\n              </div>\n\n            </div>\n          </b-form>\n        </div>\n      </div>\n    </div>\n  </modal-1>\n</template>\n\n<script>\nimport {mapState} from \"vuex\";\nimport StoreUtils from \"../../util/baseUtils/StoreUtils\";\nimport FundTransferRequest from \"../../model/request/FundTransferRequest\";\n\nexport default {\n  name: \"FundTransferForm\",\n  props: {\n    showFundTransfer: Boolean,\n  },\n  data() {\n      return {\n        showModal: true,\n        banks: [],\n        nameEnquiryModel:FundTransferRequest.nameEnquiry,\n        fundTransferModel:FundTransferRequest.fundTransfer,\n        errorMessage:null,\n        bankName:null,\n        parentName:null\n      }\n    },\n  methods: {\n\n    setStageForward(){\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateStage,'transfer')\n      this.doNameEnquiryOnParentDebitAccount()\n    },\n\n    setStageBack(){\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateStage,'nameEnquiry')\n\n    },\n\n    doFundTransfer(){\n      let SplitBankName;\n\n      if(this.bankName){\n        let bankArray = this.bankName?.split(\" \")\n        let bankCode =bankArray[bankArray?.length-1];\n        SplitBankName= this.bankName?.replace(bankCode,\"\").trim();\n      }else{}\n\n\n      this.fundTransferModel.creditAccountName = this.isSendingTo ? this.coreStepAccount?.accountName : this.nameEnquiryDetails?.accountName\n      this.fundTransferModel.creditAccountNumber = this.isSendingTo ? this.coreStepAccount?.accountNumber : this.nameEnquiryDetails?.accountNumber\n      this.fundTransferModel.debitAccountName = this.debitAccountNameEnquiry?.accountName\n      this.fundTransferModel.debitAccountNumber = this.debitAccountNameEnquiry?.accountNumber\n      this.fundTransferModel.bankName = this.isSendingTo ? \"CORESTEP MICROFINANCE BANK\" : SplitBankName\n      this.fundTransferModel.bankCode = this.isSendingTo ? \"000000\" : this.nameEnquiryDetails?.bankCode\n      this.fundTransferModel.sessionId = this.isSendingTo ? this.coreStepAccount?.sessionId :this.nameEnquiryDetails?.sessionId\n      this.fundTransferModel.sourceType  =  \"WEB\"\n      this.fundTransferModel.reference = `CORE-STEP-${this.reference(30)}`\n      StoreUtils.dispatch(StoreUtils.actions.fundTransfer.fundTransfer).then(() => {\n        this.closeModal()\n      })\n    },\n\n    doNameEnquiryOnDebitAccount(){\n      const input = document.getElementById('debitAccountNumber')\n      this.nameEnquiryModel.accountBankCode = '000000'\n      if(input.value.length == 10) {\n        this.nameEnquiryModel.accountNumber = input.value\n        StoreUtils.dispatch(StoreUtils.actions.fundTransfer.callNameEnquiry)\n      }\n      else if(isNaN(input.value)){\n        input.style.border = \"solid crimson\"\n        this.errorMessage= 'please input numbers'\n      } else{\n        this.errorMessage = null\n      }\n    },\n\n    doNameEnquiryOnParentDebitAccount(){\n      this.nameEnquiryModel.accountBankCode = '000000'\n      this.nameEnquiryModel.accountNumber = this.currentOrganisation?.organisationStage === 'DEV' ? this.currentOrganisation?.organisationAccountNumber?.split(',')[1] : this.currentOrganisation?.organisationAccountNumber?.split(',')[0]\n      StoreUtils.dispatch(StoreUtils.actions.fundTransfer.callNameEnquiry)\n    },\n\n    doNameEnquiry(){\n      const input = document.getElementById('account-number')\n\n      if(this.isSendingTo){\n        // let CoreStep = this.bankList.filter(it => it.name === 'CORESTEP MICROFINANCE BANK')\n        // let bankCode = CoreStep.map(item => item.code).toLocaleString()\n        // console.log(bankCode)\n        this.nameEnquiryModel.accountBankCode = '000000'\n        if(input.value.length == 10) {\n          console.log(input.value)\n          this.nameEnquiryModel.accountNumber = input.value\n          StoreUtils.dispatch(StoreUtils.actions.fundTransfer.callNameEnquiry)\n        }console.log(input.value)\n      }else if(!this.isSendingTo){\n        let bankArray = this.bankName.split(\" \")\n        let bankCode = bankArray[bankArray.length - 1];\n        this.nameEnquiryModel.accountBankCode = bankCode\n        if(input.value.length == 10) {\n          this.nameEnquiryModel.accountNumber = input.value\n          StoreUtils.dispatch(StoreUtils.actions.fundTransfer.callNameEnquiry)\n        }\n      }\n      else{\n        if(isNaN(input.value)){\n          this.errorMessage= 'please input numbers'\n        }else{\n          this.errorMessage= null\n        }\n      }\n\n\n\n    },\n\n    closeModal() {\n      //close modal form\n      this.showModal = false;\n      this.$emit(\"closeFundTransferForm\", false);\n      this.showModal = true;\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateCloseModal, false)\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateDebitAccountNameEnquiry, null)\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateCoreStepCreditAccount, null)\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateNameEnquiry, null)\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateSendingTo, null)\n      StoreUtils.commit(StoreUtils.mutations.fundTransfer.updateStage,'nameEnquiry')\n      Object.keys(this.fundTransferModel).forEach((key) => {\n        this.fundTransferModel[key] = null\n      })\n    },\n\n    reference(length) {\n      let result = \"\"\n      let characters = 'abcdefghijklmnopgrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ0123456789';\n      let charactersLength = characters.length;\n      for (var i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n      return result;\n    },\n\n  },\n  watch: {\n\n    bankList(newValue, oldValue) {\n      if (this.bankList.length !== 0) {\n        //if(this.bankList.data.length!==0){\n        let bank = [];\n        bank = this.bankList;\n        this.banks = bank.map((item) => {\n          return {\n            value: `${item.name} ${item.code}`,\n            label: `${item.name}`,\n          };\n        });\n      }\n    },\n  },\n\n\n  computed:{\n    ...mapState({\n      bankList: (state) => state.virtualAccount.bankList,\n      nameEnquiryDetails:(state) => state.fundTransfer.nameEnquiry,\n      debitAccountNameEnquiry:(state) => state.fundTransfer.debitAccountNameEnquiry,\n      loading:(state) => state.fundTransfer.loading,\n      loading2:(state) => state.fundTransfer.loading2,\n      isSendingTo:state => state.fundTransfer.sendingTo,\n      showModal:state => state.fundTransfer.closeModal,\n      stage:state =>state.fundTransfer.stage,\n      coreStepAccount:state => state.fundTransfer.coreStepCreditAccount\n\n\n\n    }),\n    currentOrganisation() {\n      return StoreUtils.rootGetters(StoreUtils.getters.auth.getCurrentOrganization)\n    },\n  },\n\n  mounted() {\n    StoreUtils.dispatch(StoreUtils.actions.virtualAccount.updateReadBankList).then();\n  }\n\n}\n</script>\n\n<style scoped>\n.spinner-border {\n  display: inline-block;\n  width: 1rem;\n  height: 1rem;\n  vertical-align: text-bottom;\n  border: 0.25em solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  -webkit-animation: spinner-border 0.75s linear infinite;\n  animation: spinner-border 0.75s linear infinite;\n}\n\n@keyframes spinner-border {\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>"]}]}