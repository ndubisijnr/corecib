{"remainingRequest":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/clark/Desktop/business.corestep.com/src/components/form/PaybillsForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/clark/Desktop/business.corestep.com/src/components/form/PaybillsForm.vue","mtime":1684628079222},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/cache-loader/dist/cjs.js","mtime":1670880017776},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/babel-loader/lib/index.js","mtime":1670880017786},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/cache-loader/dist/cjs.js","mtime":1670880017776},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js","mtime":1670880044043}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7bWFwU3RhdGV9IGZyb20gInZ1ZXgiOwppbXBvcnQgU3RvcmVVdGlscyBmcm9tICJAL3V0aWwvYmFzZVV0aWxzL1N0b3JlVXRpbHMiOwppbXBvcnQgQmlsbHNQYXltZW50UmVxdWVzdCBmcm9tICJAL21vZGVsL3JlcXVlc3QvQmlsbHNQYXltZW50UmVxdWVzdCI7CmltcG9ydCBBdXRoZW50aWNhdGlvblJlc3BvbnNlIGZyb20gIkAvbW9kZWwvcmVwb25zZS9BdXRoZW50aWNhdGlvblJlc3BvbnNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGF5YmlsbHNGb3JtIiwKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIHByb2R1Y3RwYXltZW50TW9kZGVsOkJpbGxzUGF5bWVudFJlcXVlc3QucHJvZHVjdFBheW1lbnQsCiAgICAgIGN1c3RvbWVyRW5xTW9kZWw6QmlsbHNQYXltZW50UmVxdWVzdC5jdXN0b21lckVucXVpcnksCiAgICAgIGFjdGlvbjpudWxsLAogICAgICBjb2RlOnRoaXMucHJvZHVjdENvZGUsCiAgICAgIGVtYWlsTW9kZWw6QXV0aGVudGljYXRpb25SZXNwb25zZS5vcmdhbmlzYXRpb24KICAgIH0KICB9LAoKICBwcm9wczp7CiAgICBiaWxsZXJDdXN0b21lcklkSW5wdXRMYWJlbDogU3RyaW5nLAogICAgcHJvZHVjdEJpbGxlckNvZGU6U3RyaW5nLAogICAgcHJvZHVjdENvZGU6U3RyaW5nLAogICAgcHJvZHVjdFByaWNlOlN0cmluZywKICAgIGJpbGxlckltYWdlOlN0cmluZywKCiAgfSwKICBtZXRob2RzOnsKICAgIGN1c3RvbWVyRW5xKHByb2R1Y3RfY29kZSwgYWN0aW9uKXsKICAgICAgLy9jaGVja3MgaWYgdXNlcnMgaXMgdXNpbmcgdGhlIHZhbGlkYXRlCiAgICAgIGlmKHRoaXMuYWN0aW9uID09ICd2YWxpZGF0ZScpewogICAgICAgIHRoaXMuY3VzdG9tZXJFbnFNb2RlbC5iaWxsZXJDb2RlID0gcHJvZHVjdF9jb2RlCiAgICAgICAgU3RvcmVVdGlscy5kaXNwYXRjaChTdG9yZVV0aWxzLmFjdGlvbnMuYmlsbHNwYXltZW50LnVwZGF0ZUN1c3RvbWVyRW5xLCB0aGlzLmN1c3RvbWVyRW5xTW9kZWwpLnRoZW4oKCkgPT4gewogICAgICAgICAgaWYodGhpcy5lcnJvcl9tc2cgPT0gJzAwJyl7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNtYXJ0Y2FyZElucHV0Iikuc3R5bGUuYm9yZGVyID0gInNvbGlkIGdyZWVuIgogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIC8vY2hlY2tzIHRvIGtub3cgd2hhdCBlcnJvciB0byBkaXNwbGF5IGVpdGhlciBzbWFydCBjYXJkIG9yIG1ldGVyIG51bWJlciBvciBiZXQgbnVtYmVyIGVycm9yCiAgICAgICAgICAgIGlmKHByb2R1Y3RfY29kZS5pbmNsdWRlcygnRUxFQ1RSSUMnKSkgewogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnIiKS5pbm5lckhUTUwgPSAiSW52YWxpZCBtZXRlciBudW1iZXIiCiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNtYXJ0Y2FyZElucHV0Iikuc3R5bGUuYm9yZGVyID0gInNvbGlkIHJlZCIKICAgICAgICAgICAgfWVsc2UgaWYocHJvZHVjdF9jb2RlLmluY2x1ZGVzKCdDQUJMRScpKXsKICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyIikuaW5uZXJIVE1MID0gIkludmFsaWQgc21hcnQgY2FyZCBudW1iZXIiCiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNtYXJ0Y2FyZElucHV0Iikuc3R5bGUuYm9yZGVyID0gInNvbGlkIHJlZCIKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVyciIpLmlubmVySFRNTCA9ICJDb3VsZCBub3QgdmFsaWRhdGUgbnVtYmVyIgogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzbWFydGNhcmRJbnB1dCIpLnN0eWxlLmJvcmRlciA9ICJzb2xpZCByZWQiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9jbGVhcnMgZXJyb3IgdGV4dCBtYWtlcyBpdCBkaXNhcHBlYXIKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVyciIpLmlubmVySFRNTCA9ICIiCiAgICAgICAgICAgIH0sMjAwMCkKCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfWVsc2V7CiAgICAgICAgLy9jYWxscyBwYXltZW50IGFwaQogICAgICAgIGlmKHByb2R1Y3RfY29kZS5pbmNsdWRlcygnQ0FCTEUnKSl7CiAgICAgICAgICBsZXQgcHJpY2UgPSB0aGlzLnByb2R1Y3RwYXltZW50TW9kZGVsLnByb2R1Y3RDb2RlLnNwbGl0KCIgIilbMF0KICAgICAgICAgIGxldCBjb2RlID0gdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5wcm9kdWN0Q29kZS5zcGxpdCgiICIpWzFdCiAgICAgICAgICB0aGlzLnByb2R1Y3RwYXltZW50TW9kZGVsLmFtb3VudCA9IHByaWNlCiAgICAgICAgICB0aGlzLnByb2R1Y3RwYXltZW50TW9kZGVsLnByb2R1Y3RDb2RlID0gY29kZQogICAgICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5iaWxsZXJDdXN0b21lcklkPSB0aGlzLmN1c3RvbWVyRW5xTW9kZWwuYmlsbGVyQ3VzdG9tZXJJZAogICAgICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5yZWZlcmVuY2UgPSBgQklaR0VNLSR7dGhpcy5yZWZlcmVuY2UoMzApfWAKICAgICAgICAgIHRoaXMucHJvZHVjdHBheW1lbnRNb2RkZWwuZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3JnYW5pc2F0aW9uRW1haWwnKS52YWx1ZQogICAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5iaWxsZXJDdXN0b21lcklkPSB0aGlzLmN1c3RvbWVyRW5xTW9kZWwuYmlsbGVyQ3VzdG9tZXJJZAogICAgICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5yZWZlcmVuY2UgPSBgQklaR0VNLSR7dGhpcy5yZWZlcmVuY2UoMzApfWAKICAgICAgICAgIHRoaXMucHJvZHVjdHBheW1lbnRNb2RkZWwuZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3JnYW5pc2F0aW9uRW1haWwnKS52YWx1ZQogICAgICAgIH0KCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdHBheW1lbnRNb2RkZWwpCiAgICAgIFN0b3JlVXRpbHMuZGlzcGF0Y2goU3RvcmVVdGlscy5hY3Rpb25zLmJpbGxzcGF5bWVudC51cGRhdGVQYXltZW50LCB0aGlzLnByb2R1Y3RwYXltZW50TW9kZGVsKS50aGVuKCgpID0+IHsKICAgICAgICBTdG9yZVV0aWxzLmRpc3BhdGNoKFN0b3JlVXRpbHMuYWN0aW9ucy5hdXRoLnJlYWREYXNoYm9hcmRTdGF0cykKICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIGNsZWFyRW5xKCl7CiAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VzdG9tZXJFbnF1aXJ5RGF0YSkuZm9yRWFjaChrZXkgPT4gdGhpcy5jdXN0b21lckVucXVpcnlEYXRhW2tleV0gPSBudWxsKQogICAgfSwKICAgIHBheW1lbnQoKXsKICAgICAgaWYodGhpcy5wcm9kdWN0c1swXS5wcm9kdWN0QmlsbGVyQ29kZS5pbmNsdWRlcygnREFUQScpIHx8IHRoaXMucHJvZHVjdHNbMF0ucHJvZHVjdEJpbGxlckNvZGUuaW5jbHVkZXMoJ0NBQkxFX1RWJykpewogICAgICAgIGxldCBwcmljZSA9IHRoaXMucHJvZHVjdHBheW1lbnRNb2RkZWwucHJvZHVjdENvZGUuc3BsaXQoIiAiKVswXQogICAgICAgIGxldCBjb2RlID0gdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5wcm9kdWN0Q29kZS5zcGxpdCgiICIpWzFdCiAgICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5hbW91bnQgPSBwcmljZQogICAgICAgIHRoaXMucHJvZHVjdHBheW1lbnRNb2RkZWwucHJvZHVjdENvZGUgPSBjb2RlCiAgICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5lbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmdhbmlzYXRpb25FbWFpbCcpLnZhbHVlCiAgICAgIH1lbHNlIGlmICh0aGlzLnByb2R1Y3RzWzBdLnByb2R1Y3RCaWxsZXJDb2RlLmluY2x1ZGVzKCdBSVJUSU1FJykpewogICAgICAgIHRoaXMucHJvZHVjdHBheW1lbnRNb2RkZWwucHJvZHVjdENvZGUgPSB0aGlzLnByb2R1Y3RDb2RlCiAgICAgIH0KICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5yZWZlcmVuY2UgPSBgQklaR0VNLSR7dGhpcy5yZWZlcmVuY2UoMzApfWAKICAgICAgdGhpcy5wcm9kdWN0cGF5bWVudE1vZGRlbC5lbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmdhbmlzYXRpb25FbWFpbCcpLnZhbHVlCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdHBheW1lbnRNb2RkZWwpCiAgICAgIFN0b3JlVXRpbHMuZGlzcGF0Y2goU3RvcmVVdGlscy5hY3Rpb25zLmJpbGxzcGF5bWVudC51cGRhdGVQYXltZW50LCB0aGlzLnByb2R1Y3RwYXltZW50TW9kZGVsKS50aGVuKCgpID0+IHsKICAgICAgICBTdG9yZVV0aWxzLmRpc3BhdGNoKFN0b3JlVXRpbHMuYWN0aW9ucy5hdXRoLnJlYWREYXNoYm9hcmRTdGF0cykKICAgICAgfSkKICAgIH0sCiAgICByZWZlcmVuY2UobGVuZ3RoKSB7CiAgICAgIGxldCByZXN1bHQgPSAiIgogICAgICBsZXQgY2hhcmFjdGVycyA9ICdhYmNkZWZnaGlqa2xtbm9wZ3JzdHV2d3h5ekFCQ0RFRkpISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSc7CiAgICAgIGxldCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6ewogICAgLi4ubWFwU3RhdGUoewogICAgICBjYXRlZ29yaWVzOiBzdGF0ZSA9PiBzdGF0ZS5iaWxsc3BheW1lbnQuY2F0ZWdvcmllcy5kYXRhLAogICAgICBiaWxsZXJzOiBzdGF0ZSA9PiBzdGF0ZS5iaWxsc3BheW1lbnQuYmlsbGVycy5kYXRhLAogICAgICBiaWxsZXJsb2FkaW5nOnN0YXRlID0+IHN0YXRlLmJpbGxzcGF5bWVudC5iaWxsZXJzbG9hZGluZywKICAgICAgY2F0ZWdvcnlsb2FkaW5nOnN0YXRlID0+IHN0YXRlLmJpbGxzcGF5bWVudC5jYXRlZ29yaWVzbG9hZGluZywKICAgICAgcHJvZHVjdHM6c3RhdGUgPT4gc3RhdGUuYmlsbHNwYXltZW50LnByb2R1Y3RzLmRhdGEsCiAgICAgIHBheW1lbnRMb2FkaW5nOnN0YXRlID0+IHN0YXRlLmJpbGxzcGF5bWVudC5wYXltZW50bG9hZGluZywKICAgICAgY3VzdG9tZXJFbnF1aXJ5RGF0YTpzdGF0ZSA9PiBzdGF0ZS5iaWxsc3BheW1lbnQuY3VzdG9tZXJFbnEsCiAgICAgIGN1c3RvbWVyRW5xdWlyeUxvYWRpbmc6IHN0YXRlID0+IHN0YXRlLmJpbGxzcGF5bWVudC5jdXN0b21lckVucWxvYWRpbmcsCiAgICAgIGVycm9yX21zZzpzdGF0ZSA9PiBzdGF0ZS5iaWxsc3BheW1lbnQuZXJyb3JNc2csCiAgICB9KSwKCiAgICBjdXJyZW50T3JnYW5pc2F0aW9uKCl7CiAgICAgIHJldHVybiBTdG9yZVV0aWxzLnJvb3RHZXR0ZXJzKFN0b3JlVXRpbHMuZ2V0dGVycy5hdXRoLmdldEN1cnJlbnRPcmdhbml6YXRpb24pCiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["PaybillsForm.vue"],"names":[],"mappings":";AAoJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"PaybillsForm.vue","sourceRoot":"src/components/form","sourcesContent":["<template>\n    <div class=\"form\">\n      <div class=\"card-header\">\n        <img :src=\"billerImage\" width=\"40\" />\n      </div>\n      <!-- handle Cable TV, Electricity and Betting payment  -->\n        <div v-if=\"products[0].productBillerCode.includes('CABLE') || products[0].productBillerCode.includes('ELECTRIC') || products[0].productBillerCode.includes('BET')\">\n\n          <!-- handles customer enquiry  -->\n          <form @submit.prevent=\"customerEnq(product_code = products[0].productBillerCode)\">\n          <div class=\"card-body\">\n            <div>\n                  <!-- Smart card number and meter number -->\n                  <label v-if=\"products[0].productBillerCode.includes('CABLE') || products[0].productBillerCode.includes('ELECTRIC')\" class=\"small\">{{products[0].productBillerCode.includes('CABLE') ? 'Smart Card Number' : 'Meter Number' }}</label>\n                  <label v-else class=\"small\">Account ID</label>\n                  <b-input v-if=\"products[0].productBillerCode.includes('CABLE') || products[0].productBillerCode.includes('ELECTRIC')\" type=\"number\" :placeholder=\"products[0].productBillerCode.includes('ELECTRIC') ? 'Enter your meter number' :'Enter your smart card number'\" id=\"smartcardInput\" v-model=\"customerEnqModel.billerCustomerId\" :disabled=\"!Object.values(customerEnquiryData).every((o) => o === null)\" required></b-input>\n                  <b-input v-else type=\"number\" placeholder=\"Enter your Account Id number\" id=\"smartcardInput\" v-model=\"customerEnqModel.billerCustomerId\" :disabled=\"!Object.values(customerEnquiryData).every((o) => o === null)\" required></b-input>\n                  <span class=\"small\" v-if=\"!Object.values(customerEnquiryData).every((o) => o === null)\"><span class=\"small\">Customer:</span> <b>{{ customerEnquiryData.customerName }}</b> <br><span @click=\"clearEnq()\"><span class=\"text-primary\" style=\"cursor: pointer\">Not me?</span></span></span>\n            </div>\n            <p class=\"small text-danger\" id=\"err\"></p> <!-- shows customer enquiry error -->\n            <!-- end of customer enquiry area -->\n\n\n            <div v-if=\"!Object.values(customerEnquiryData).every((o) => o === null)\">\n              <div v-if=\"products[0].productBillerCode.includes('CABLE') || products[0].productBillerCode.includes('ELECTRIC')\">\n              <div v-if=\"products[0].productPrice !== 'VARIABLE'\">\n                <label class=\"small\">Select Plan</label>\n                <b-select v-if=\"products[0].productBillerCode.includes('CABLE') || products[0].productBillerCode.includes('DATA')\" v-model=\"productpaymentModdel.productCode\" required>\n                  <b-select-option  v-for=\"i in products\" :key=\"i\" :value=\"i.productPrice + ' ' + i.productCode\">{{i.productDescription}} @ {{i.productPrice | formatAmount}}</b-select-option>\n                </b-select>\n                <b-select v-else v-model=\"productpaymentModdel.productCode\">\n                  <b-select-option  v-for=\"i in products\" :key=\"i\" :value=\"i.productCode\">{{i.productCode}} @ {{i.productPrice | formatAmount}}</b-select-option>\n                </b-select>\n              </div>\n              <div v-if=\"products[0].productPrice === 'VARIABLE'\">\n                <div>\n                <label class=\"small\">Amount</label>\n                <b-input type=\"number\" required class=\"mb-2\" v-model=\"productpaymentModdel.amount\" />\n                </div>\n                <div>\n              <label class=\"small\">Select Option</label>\n              <b-select v-model=\"productpaymentModdel.productCode\">\n                <b-select-option  v-for=\"i in products\" :key=\"i\" :value=\"i.productCode\">{{i.productCode.replace('_', ' ') | titleCase}}</b-select-option>\n              </b-select>\n                </div>\n              </div>\n              <div class=\"mt-2\">\n                <label class=\"small\">Email</label>\n                <b-input type=\"email\" :value=\"currentOrganisation.organisationEmail\" id=\"organisationEmail\"></b-input>\n              </div>\n              <h6 class=\"small m-1\" v-if=\"products[0].productBillerCode.includes('ELECTRIC')\">Token will be sent to your email on successful purchase</h6>\n            </div>\n\n              <!-- Betting -->\n              <div v-if=\"products[0].productBillerCode.includes('BET')\">\n                <div>\n                  <label class=\"small\">Amount</label>\n                  <b-input type=\"number\" required class=\"mb-2\" v-model=\"productpaymentModdel.amount\">\n                  </b-input>\n                </div>\n                <div>\n                  <label class=\"small\">Select Plan</label>\n                  <b-select v-model=\"productpaymentModdel.productCode\" >\n                    <b-select-option  v-for=\"i in products\" :key=\"i\" :value=\"i.productCode\">{{i.productDescription}}</b-select-option>\n                  </b-select>\n                </div>\n                <div class=\"mt-2\">\n                  <label class=\"small\">Email</label>\n                  <b-input type=\"email\" :value=\"currentOrganisation.organisationEmail\" id=\"organisationEmail\"></b-input>\n                </div>\n              </div>\n              <!-- end of betting -->\n\n            </div>\n          </div>\n            <div class=\"card-footer\">\n              <b-button class=\"mt-2 w-100\" v-if=\"!Object.values(customerEnquiryData).every((o) => o === null)\" type=\"submit\" @click=\"action = 'pay'\" style=\"background-color:#413d52;color:white\" :disabled=\"paymentLoading\">{{paymentLoading ? 'Please Wait...' : 'Pay'}}</b-button>\n              <b-button class=\"mt-2 w-100\" v-else type=\"submit\" style=\"background-color:#413d52;color:white\" :disabled=\"customerEnquiryLoading\" @click=\"action = 'validate'\">{{customerEnquiryLoading ? 'Please Wait...' : 'Validate'}}</b-button>\n                </div>\n          </form>\n        </div>\n      <!-- end handle Cable TV, Electricity and Betting payment -->\n\n      <!-- handle AIRTIME and DATA purchase -->\n        <form @submit.prevent=\"payment(obj = productCode)\" v-if=\"products[0].productBillerCode.includes('AIRTIME') || products[0].productBillerCode.includes('DATA')\">\n          <div class=\"card-body\">\n                <div class=\"mb-2\"  v-for=\"i in products\" :key=\"i\">\n                  <div v-if=\"i.productBillerCode.includes('AIRTIME')\">\n                  <div>\n                    <!-- area for AIRTIME -->\n                      <div v-for=\"i in products\" :key=\"i\">\n                        <div>\n                          <label class=\"small\">{{billerCustomerIdInputLabel}}</label>\n                          <b-input type=\"tell\" required class=\"mb-2\"\n                                   v-model=\"productpaymentModdel.billerCustomerId\" placeholder=\"Enter mobile number\">\n                          </b-input>\n                        </div>\n                        <div v-if=\"i.productPrice == 'VARIABLE'\">\n                          <div>\n                            <label class=\"small\">Amount</label>\n                            <b-input type=\"number\" required class=\"mb-2\" v-model=\"productpaymentModdel.amount\">\n                            </b-input>\n                          </div>\n                        </div>\n                        <div class=\"mt-2\">\n                          <label class=\"small\">Email</label>\n                          <b-input type=\"email\" :value=\"currentOrganisation.organisationEmail\" id=\"organisationEmail\"></b-input>\n                        </div>\n                      </div>\n                  </div>\n                  </div>\n\n                </div>\n          <!-- end area for AIRTIME -->\n\n          <!-- Area for DATA BUNDLE -->\n              <div v-if=\"products[0].productBillerCode.includes('DATA')\">\n                <div>\n                  <label class=\"small\">{{billerCustomerIdInputLabel ? billerCustomerIdInputLabel : 'Betting Wallet'}}</label>\n                  <b-input type=\"tell\" required class=\"mb-2\"\n                           v-model=\"productpaymentModdel.billerCustomerId\" :placeholder=\"billerCustomerIdInputLabel ? `${billerCustomerIdInputLabel}`: 'Betting Wallet'\">\n                  </b-input>\n                </div>\n                <div>\n                  <div v-if=\"products[0].productBillerCode.includes('DATA')\">\n                    <label class=\"small\">Select Plan</label>\n                    <b-select v-model=\"productpaymentModdel.productCode\" >\n                       <b-select-option  v-for=\"i in products\" :key=\"i\" :value=\"i.productPrice + ' ' + i.productCode\">{{i.productDescription}} @ {{i.productPrice | formatAmount}}</b-select-option>\n                    </b-select>\n                    <div class=\"mt-2\">\n                      <label class=\"small\">Email</label>\n                      <b-input type=\"email\" :value=\"currentOrganisation.organisationEmail\" id=\"organisationEmail\"></b-input>\n                    </div>\n                  </div>\n                </div>\n            </div>\n\n          </div>\n\n          <div class=\"card-footer\">\n            <b-button class=\"mt-2 w-100\" type=\"submit\" style=\"background-color:#413d52;color:white\" :disabled=\"paymentLoading\">{{paymentLoading ? 'Please Wait...' : 'Proceed'}}</b-button>\n          </div>\n        </form>\n      <!-- End Area for DATA BUNDLE -->\n    </div>\n</template>\n\n<script>\nimport {mapState} from \"vuex\";\nimport StoreUtils from \"@/util/baseUtils/StoreUtils\";\nimport BillsPaymentRequest from \"@/model/request/BillsPaymentRequest\";\nimport AuthenticationResponse from \"@/model/reponse/AuthenticationResponse\";\n\nexport default {\n  name: \"PaybillsForm\",\n  data(){\n    return{\n      productpaymentModdel:BillsPaymentRequest.productPayment,\n      customerEnqModel:BillsPaymentRequest.customerEnquiry,\n      action:null,\n      code:this.productCode,\n      emailModel:AuthenticationResponse.organisation\n    }\n  },\n\n  props:{\n    billerCustomerIdInputLabel: String,\n    productBillerCode:String,\n    productCode:String,\n    productPrice:String,\n    billerImage:String,\n\n  },\n  methods:{\n    customerEnq(product_code, action){\n      //checks if users is using the validate\n      if(this.action == 'validate'){\n        this.customerEnqModel.billerCode = product_code\n        StoreUtils.dispatch(StoreUtils.actions.billspayment.updateCustomerEnq, this.customerEnqModel).then(() => {\n          if(this.error_msg == '00'){\n              document.getElementById(\"smartcardInput\").style.border = \"solid green\"\n          }else{\n            //checks to know what error to display either smart card or meter number or bet number error\n            if(product_code.includes('ELECTRIC')) {\n              document.getElementById(\"err\").innerHTML = \"Invalid meter number\"\n              document.getElementById(\"smartcardInput\").style.border = \"solid red\"\n            }else if(product_code.includes('CABLE')){\n              document.getElementById(\"err\").innerHTML = \"Invalid smart card number\"\n              document.getElementById(\"smartcardInput\").style.border = \"solid red\"\n            }else{\n              document.getElementById(\"err\").innerHTML = \"Could not validate number\"\n              document.getElementById(\"smartcardInput\").style.border = \"solid red\"\n            }\n            //clears error text makes it disappear\n            setTimeout(() => {\n              document.getElementById(\"err\").innerHTML = \"\"\n            },2000)\n\n          }\n        })\n      }else{\n        //calls payment api\n        if(product_code.includes('CABLE')){\n          let price = this.productpaymentModdel.productCode.split(\" \")[0]\n          let code = this.productpaymentModdel.productCode.split(\" \")[1]\n          this.productpaymentModdel.amount = price\n          this.productpaymentModdel.productCode = code\n          this.productpaymentModdel.billerCustomerId= this.customerEnqModel.billerCustomerId\n          this.productpaymentModdel.reference = `BIZGEM-${this.reference(30)}`\n          this.productpaymentModdel.email = document.getElementById('organisationEmail').value\n        }else{\n          this.productpaymentModdel.billerCustomerId= this.customerEnqModel.billerCustomerId\n          this.productpaymentModdel.reference = `BIZGEM-${this.reference(30)}`\n          this.productpaymentModdel.email = document.getElementById('organisationEmail').value\n        }\n\n      // console.log(this.productpaymentModdel)\n      StoreUtils.dispatch(StoreUtils.actions.billspayment.updatePayment, this.productpaymentModdel).then(() => {\n        StoreUtils.dispatch(StoreUtils.actions.auth.readDashboardStats)\n      })\n      }\n    },\n    clearEnq(){\n      Object.keys(this.customerEnquiryData).forEach(key => this.customerEnquiryData[key] = null)\n    },\n    payment(){\n      if(this.products[0].productBillerCode.includes('DATA') || this.products[0].productBillerCode.includes('CABLE_TV')){\n        let price = this.productpaymentModdel.productCode.split(\" \")[0]\n        let code = this.productpaymentModdel.productCode.split(\" \")[1]\n        this.productpaymentModdel.amount = price\n        this.productpaymentModdel.productCode = code\n        this.productpaymentModdel.email = document.getElementById('organisationEmail').value\n      }else if (this.products[0].productBillerCode.includes('AIRTIME')){\n        this.productpaymentModdel.productCode = this.productCode\n      }\n      this.productpaymentModdel.reference = `BIZGEM-${this.reference(30)}`\n      this.productpaymentModdel.email = document.getElementById('organisationEmail').value\n      console.log(this.productpaymentModdel)\n      StoreUtils.dispatch(StoreUtils.actions.billspayment.updatePayment, this.productpaymentModdel).then(() => {\n        StoreUtils.dispatch(StoreUtils.actions.auth.readDashboardStats)\n      })\n    },\n    reference(length) {\n      let result = \"\"\n      let characters = 'abcdefghijklmnopgrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ0123456789';\n      let charactersLength = characters.length;\n      for (var i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n      return result;\n    },\n  },\n  computed:{\n    ...mapState({\n      categories: state => state.billspayment.categories.data,\n      billers: state => state.billspayment.billers.data,\n      billerloading:state => state.billspayment.billersloading,\n      categoryloading:state => state.billspayment.categoriesloading,\n      products:state => state.billspayment.products.data,\n      paymentLoading:state => state.billspayment.paymentloading,\n      customerEnquiryData:state => state.billspayment.customerEnq,\n      customerEnquiryLoading: state => state.billspayment.customerEnqloading,\n      error_msg:state => state.billspayment.errorMsg,\n    }),\n\n    currentOrganisation(){\n      return StoreUtils.rootGetters(StoreUtils.getters.auth.getCurrentOrganization)\n    }\n  },\n}\n</script>\n\n<style scoped>\n.form{\n  height: auto;\n  width: 100%;\n  background-color: #FFFFFF;\n  box-shadow:0 0 1rem 0 rgb(136 152 170 / 15%);\n  border-radius: calc(0.375rem - 1px) calc(0.375rem - 1px) 0 0;\n\n}\n.card-header{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n@media (max-width: 999px) {\n  .form{\n    height: auto;\n    width: 100%;\n    background-color: #FFFFFF;\n    box-shadow:0 0 1rem 0 rgb(136 152 170 / 15%);\n    border-radius: calc(0.375rem - 1px) calc(0.375rem - 1px) 0 0;\n\n  }\n}\n</style>"]}]}