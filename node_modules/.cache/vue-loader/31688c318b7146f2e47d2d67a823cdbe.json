{"remainingRequest":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/clark/Desktop/business.corestep.com/src/components/form/ApiKeyDisplayForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/clark/Desktop/business.corestep.com/src/components/form/ApiKeyDisplayForm.vue","mtime":1683674085712},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/cache-loader/dist/cjs.js","mtime":1670880017776},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/babel-loader/lib/index.js","mtime":1670880017786},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/cache-loader/dist/cjs.js","mtime":1670880017776},{"path":"/Users/clark/Desktop/business.corestep.com/node_modules/vue-loader/lib/index.js","mtime":1670880044043}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCBBcGlrZXlSZXF1ZXN0IGZyb20gIi4uLy4uL21vZGVsL3JlcXVlc3QvQXBpS2V5UmVxdWVzdCI7CmltcG9ydCBTdG9yZVV0aWxzIGZyb20gIi4uLy4uL3V0aWwvYmFzZVV0aWxzL1N0b3JlVXRpbHMiOwppbXBvcnQgQmFzZUJ1dHRvbiBmcm9tICIuLi8uLi9jb21wb25lbnRzL2J1dHRvbi9CYXNlQnV0dG9uIgppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7Cgpjb25zdCBUb2FzdCA9IFN3YWwubWl4aW4oewogIHRvYXN0OiB0cnVlLAogIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogIHRpbWVyOiAzMDAwLAogIHRpbWVyUHJvZ3Jlc3NCYXI6IHRydWUsCiAgZGlkT3BlbjogKHRvYXN0KSA9PiB7CiAgICB0b2FzdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgU3dhbC5zdG9wVGltZXIpOwogICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIFN3YWwucmVzdW1lVGltZXIpOwogIH0sCn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwaWtleS1Gb3JtIiwKICBjb21wb25lbnRzOiB7CiAgICBCYXNlQnV0dG9uCiAgfSwKICBkYXRhOiAoKSA9PiB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXJLZXk6ICIiLAogICAgICBoZWFkZXJWYWx1ZTogIiIsCiAgICAgIC8vd2ViSG9vazoiIiwKICAgICAgY2FsbEJhY2tVcmw6ICIiLAogICAgICBtb2RlbDogQXBpa2V5UmVxdWVzdC51cGRhdGVXZWJIb29rLAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBjb3B5VG9DbGlwYm9hcmQoKSB7CiAgICAgIGxldCBjb3B5TGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250ZW50IikudmFsdWU7CiAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvcHlMaW5rKS50aGVuKCgpID0+IHsKICAgICAgICBUb2FzdC5maXJlKHsgdGV4dDogIkNvcGllZCB0byBjbGlwYm9hcmQiLCBpY29uOiAic3VjY2VzcyIgfSkudGhlbigoKSA9PiB7fSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNvcHlUb0NsaXBib2FyZDIoKSB7CiAgICAgIGxldCBjb3B5TGluazIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29udGVudDIiKS52YWx1ZTsKICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoY29weUxpbmsyKS50aGVuKCgpID0+IHsKICAgICAgICBUb2FzdC5maXJlKHsgdGV4dDoiQ29waWVkIHRvIGNsaXBib2FyZCIsIGljb246ICJzdWNjZXNzIiB9KS50aGVuKCgpID0+IHt9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZUNoYW5nZXMoKSB7CiAgICAgIGlmKHRoaXMuYXBpLmFwaWtleVRlc3RDYWxsYmFjayA9PSBudWxsIHx8IHRoaXMuYXBpLmFwaWtleUxpdmVDYWxsYmFjayA9PSBudWxsKSB7CiAgICAgICAgdGhpcy5tb2RlbFtgYXBpa2V5JHt0aGlzLnRlc3RMaXZlfUhlYWRlcktleWBdID0gdGhpcy5oZWFkZXJLZXkKICAgICAgICB0aGlzLm1vZGVsW2BhcGlrZXkke3RoaXMudGVzdExpdmV9SGVhZGVyVmFsdWVgXSA9IHRoaXMuaGVhZGVyVmFsdWUKICAgICAgICB0aGlzLm1vZGVsW2BhcGlrZXkke3RoaXMudGVzdExpdmV9Q2FsbGJhY2tgXSA9IHRoaXMuY2FsbEJhY2tVcmwKICAgICAgICAvL3RoaXMubW9kZWxbYGFwaWtleSR7dGhpcy50ZXN0TGl2ZX1XZWJob29rYF0gPSB0aGlzLndlYkhvb2sKCiAgICAgICAgY29uc29sZS5sb2codGhpcy5tb2RlbCkKCiAgICAgICAgU3RvcmVVdGlscy5kaXNwYXRjaChTdG9yZVV0aWxzLmFjdGlvbnMuYXBpS2V5LnVwZGF0ZVdlYmhvb2tDYWxsYmFjaywgdGhpcy5tb2RlbCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLm1vZGVsLmFwaWtleU9yZ2FuaXNhdGlvbklkID0gbG9jYWxTdG9yYWdlLm9yZ2FuaXNhdGlvbklkOwogICAgICAgICAgdGhpcy5tb2RlbC5hcGlrZXlJZCA9IGxvY2FsU3RvcmFnZS5vcmdhbmlzYXRpb25JZDsKICAgICAgICAgIFN0b3JlVXRpbHMuZGlzcGF0Y2goCiAgICAgICAgICAgICAgU3RvcmVVdGlscy5hY3Rpb25zLmFwaUtleS51cGRhdGVBcGlrZXksCiAgICAgICAgICAgICAgdGhpcy5tb2RlbAogICAgICAgICAgKTsKICAgICAgICB9KQogICAgICB9ZWxzZXsKICAgICAgICAgIGxldCBoZWFkZXJLZXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt0aGlzLnRlc3RMaXZlfV9oZWFkZXJLZXlgKS52YWx1ZTsKICAgICAgICAgIGxldCBoZWFkZXJWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3RoaXMudGVzdExpdmV9X2hlYWRlclZhbHVlYCkudmFsdWU7CiAgICAgICAgICBsZXQgY2FsbGJhY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt0aGlzLnRlc3RMaXZlfV9jYWxsYmFja2ApLnZhbHVlOwoKICAgICAgICAgIHRoaXMubW9kZWxbYGFwaWtleSR7dGhpcy50ZXN0TGl2ZX1IZWFkZXJLZXlgXSA9IGhlYWRlcktleQogICAgICAgICAgdGhpcy5tb2RlbFtgYXBpa2V5JHt0aGlzLnRlc3RMaXZlfUhlYWRlclZhbHVlYF0gPSBoZWFkZXJWYWx1ZQogICAgICAgICAgdGhpcy5tb2RlbFtgYXBpa2V5JHt0aGlzLnRlc3RMaXZlfUNhbGxiYWNrYF0gPSBjYWxsYmFjawoKCiAgICAgICAgICBTdG9yZVV0aWxzLmRpc3BhdGNoKFN0b3JlVXRpbHMuYWN0aW9ucy5hcGlLZXkudXBkYXRlV2ViaG9va0NhbGxiYWNrLCB0aGlzLm1vZGVsKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5tb2RlbC5hcGlrZXlPcmdhbmlzYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5vcmdhbmlzYXRpb25JZDsKICAgICAgICAgICAgdGhpcy5tb2RlbC5hcGlrZXlJZCA9IGxvY2FsU3RvcmFnZS5vcmdhbmlzYXRpb25JZDsKICAgICAgICAgICAgU3RvcmVVdGlscy5kaXNwYXRjaCgKICAgICAgICAgICAgICAgIFN0b3JlVXRpbHMuYWN0aW9ucy5hcGlLZXkudXBkYXRlQXBpa2V5LAogICAgICAgICAgICAgICAgdGhpcy5tb2RlbAogICAgICAgICAgICApOwogICAgICAgICAgfSkKICAgICAgfQoKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5tb2RlbC5hcGlrZXlPcmdhbmlzYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5vcmdhbmlzYXRpb25JZDsKICAgIHRoaXMubW9kZWwuYXBpa2V5SWQgPSBsb2NhbFN0b3JhZ2Uub3JnYW5pc2F0aW9uSWQ7CiAgICBTdG9yZVV0aWxzLmRpc3BhdGNoKAogICAgICBTdG9yZVV0aWxzLmFjdGlvbnMuYXBpS2V5LnVwZGF0ZUFwaWtleSwKICAgICAgdGhpcy5tb2RlbAogICAgKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSh7CiAgICAgIGFwaTogKHN0YXRlKSA9PiBzdGF0ZS5hcGlLZXkuYXBpS2V5LAogICAgICBsb2FkaW5nOiAoc3RhdGUpID0+IHN0YXRlLmFwaUtleS5sb2FkaW5nLAogICAgfSksCiAgICBzdGFnZSgpIHsKICAgICAgcmV0dXJuIFN0b3JlVXRpbHMucm9vdEdldHRlcnMoU3RvcmVVdGlscy5nZXR0ZXJzLmF1dGguZ2V0U3RhZ2UpCiAgICB9LAogICAgdGVzdExpdmUoKSB7CiAgICAgIGlmICghdGhpcy5zdGFnZSkgcmV0dXJuICJUZXN0IgogICAgICByZXR1cm4gdGhpcy5zdGFnZS5yZXBsYWNlKCJQUk9EIiwgIkxpdmUiKS5yZXBsYWNlKCJERVYiLCAiVGVzdCIpOwogICAgfSwKICAgIGN1cnJlbnRPcmdhbmlzYXRpb24oKSB7CiAgICAgIHJldHVybiBTdG9yZVV0aWxzLnJvb3RHZXR0ZXJzKAogICAgICAgIFN0b3JlVXRpbHMuZ2V0dGVycy5hdXRoLmdldEN1cnJlbnRPcmdhbml6YXRpb24KICAgICAgKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ApiKeyDisplayForm.vue"],"names":[],"mappings":";AAsFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ApiKeyDisplayForm.vue","sourceRoot":"src/components/form","sourcesContent":["<template>\n  <div>\n    <validation-observer v-slot=\"{ handleSubmit }\" ref=\"formValidator\">\n      <div class=\"\">\n        <form class=\"container form-group form-login\" role=\"form\" @submit.prevent=\"handleSubmit(saveChanges)\">\n<!--          <span :class=\"{ 'spinner-border': loading }\"></span>-->\n          <div>\n            <label class=\"form-label mt-2 pr-4\">{{ testLive }} Secret Key </label>\n            <div class=\"form-floating\">\n              <input type=\"password\" class=\"form-control\" :value=\"api[`apikey${testLive}SK`]\" id=\"content\" disabled=\"true\" style=\"cursor:pointer\" />\n              <i class=\"fas fa-copy\" style=\"position: absolute; right: 20px; top: 8px; cursor: pointer;z-index:99999\" @click=\"copyToClipboard()\"></i>\n            </div>\n\n\n            <label class=\"form-label mt-2 pr-4\">{{ testLive }} Public Key </label>\n            <div class=\"form-floating\">\n              <input type=\"text\" class=\"form-control\" :value=\"api[`apikey${testLive}PK`]\" disabled=\"true\" id=\"content2\"\n                style=\"cursor:pointer\" />\n              <i class=\"fas fa-copy\" style=\"position: absolute; right: 20px; top: 8px; cursor: pointer;z-index:99999\"\n                 @click=\"copyToClipboard2()\"></i>\n            </div>\n\n            <div v-if=\"api.apikeyTestCallback == null && api.apikeyLiveCallback == null\">\n            <label class=\"form-label mt-2 pr-4\">{{ testLive }} Callback URL </label>\n            <div class=\"form-floating\">\n              <input type=\"text\" class=\"form-control\" v-model=\"callBackUrl\" required  />\n            </div>\n\n            <label class=\"form-label pr-4\">{{ testLive }} Authorization Header </label>\n            <div class=\"row mb-3\">\n              <div class=\"col-5\">\n                <div class=\"form-floating\">\n                  <input type=\"text\" class=\"form-control\" v-model=\"headerKey\" required />\n                  <label>Key</label>\n\n                </div>\n\n              </div>\n              <div class=\"col-7\">\n                <div class=\"form-floating\">\n                  <input type=\"text\" class=\"form-control\" v-model=\"headerValue\" required />\n                  <label>Value</label>\n                </div>\n              </div>\n\n            </div>\n              <div class=\"text-start\">\n                <base-button title=\"Save\" :loading=\"loading\"></base-button>\n              </div>\n            </div>\n            <div v-else>\n              <label class=\"form-label mt-2 pr-4\">{{ testLive }} Callback URL </label>\n              <div class=\"form-floating\">\n                <input type=\"text\" v-if=\"currentOrganisation.organisationStage === 'DEV'\" class=\"form-control\" v-model=\"api.apikeyTestCallback\"  :id=\"`${testLive}_callback`\" required/>\n                <input v-else type=\"text\" class=\"form-control\" v-model=\"api.apikeyLiveCallback\"  :id=\"`${testLive}_callback`\" required/>\n              </div>\n\n              <label class=\"form-label pr-4\">{{ testLive }} Authorization Header </label>\n              <div class=\"row mb-3\">\n                <div class=\"col-5\">\n                  <div class=\"form-floating\">\n                    <input type=\"text\" v-if=\"currentOrganisation.organisationStage === 'DEV'\" class=\"form-control\" v-model=\"api.apikeyTestHeaderKey\" :id=\"`${testLive}_headerKey`\"  required/>\n                    <input type=\"text\" v-else class=\"form-control\" v-model=\"api.apikeyLiveHeaderKey\" :id=\"`${testLive}_headerKey`\" required/>\n                    <label>Key</label>\n                  </div>\n                </div>\n                <div class=\"col-7\">\n                  <div class=\"form-floating\">\n                    <input v-if=\"currentOrganisation.organisationStage === 'DEV'\" type=\"text\" class=\"form-control\" v-model=\"api.apikeyTestHeaderValue\" :id=\"`${testLive}_headerValue`\" required/>\n                    <input v-else type=\"text\" class=\"form-control\" v-model=\"api.apikeyLiveHeaderValue\" :id=\"`${testLive}_headerValue`\" required/>\n                    <label>Value</label>\n                  </div>\n                </div>\n              </div>\n              <div class=\"text-start\">\n                <base-button title=\"Save\" :loading=\"loading\"></base-button>\n              </div>\n            </div>\n\n          </div>\n        </form>\n      </div>\n    </validation-observer>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport ApikeyRequest from \"../../model/request/ApiKeyRequest\";\nimport StoreUtils from \"../../util/baseUtils/StoreUtils\";\nimport BaseButton from \"../../components/button/BaseButton\"\nimport Swal from \"sweetalert2\";\n\nconst Toast = Swal.mixin({\n  toast: true,\n  position: \"top-end\",\n  showConfirmButton: false,\n  timer: 3000,\n  timerProgressBar: true,\n  didOpen: (toast) => {\n    toast.addEventListener(\"mouseenter\", Swal.stopTimer);\n    toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n  },\n});\nexport default {\n  name: \"Apikey-Form\",\n  components: {\n    BaseButton\n  },\n  data: () => {\n    return {\n      headerKey: \"\",\n      headerValue: \"\",\n      //webHook:\"\",\n      callBackUrl: \"\",\n      model: ApikeyRequest.updateWebHook,\n    };\n  },\n\n  methods: {\n    copyToClipboard() {\n      let copyLink = document.getElementById(\"content\").value;\n      navigator.clipboard.writeText(copyLink).then(() => {\n        Toast.fire({ text: \"Copied to clipboard\", icon: \"success\" }).then(() => {});\n      });\n    },\n    copyToClipboard2() {\n      let copyLink2 = document.getElementById(\"content2\").value;\n      navigator.clipboard.writeText(copyLink2).then(() => {\n        Toast.fire({ text:\"Copied to clipboard\", icon: \"success\" }).then(() => {});\n      });\n    },\n    saveChanges() {\n      if(this.api.apikeyTestCallback == null || this.api.apikeyLiveCallback == null) {\n        this.model[`apikey${this.testLive}HeaderKey`] = this.headerKey\n        this.model[`apikey${this.testLive}HeaderValue`] = this.headerValue\n        this.model[`apikey${this.testLive}Callback`] = this.callBackUrl\n        //this.model[`apikey${this.testLive}Webhook`] = this.webHook\n\n        console.log(this.model)\n\n        StoreUtils.dispatch(StoreUtils.actions.apiKey.updateWebhookCallback, this.model).then(() => {\n          this.model.apikeyOrganisationId = localStorage.organisationId;\n          this.model.apikeyId = localStorage.organisationId;\n          StoreUtils.dispatch(\n              StoreUtils.actions.apiKey.updateApikey,\n              this.model\n          );\n        })\n      }else{\n          let headerKey = document.getElementById(`${this.testLive}_headerKey`).value;\n          let headerValue = document.getElementById(`${this.testLive}_headerValue`).value;\n          let callback = document.getElementById(`${this.testLive}_callback`).value;\n\n          this.model[`apikey${this.testLive}HeaderKey`] = headerKey\n          this.model[`apikey${this.testLive}HeaderValue`] = headerValue\n          this.model[`apikey${this.testLive}Callback`] = callback\n\n\n          StoreUtils.dispatch(StoreUtils.actions.apiKey.updateWebhookCallback, this.model).then(() => {\n            this.model.apikeyOrganisationId = localStorage.organisationId;\n            this.model.apikeyId = localStorage.organisationId;\n            StoreUtils.dispatch(\n                StoreUtils.actions.apiKey.updateApikey,\n                this.model\n            );\n          })\n      }\n\n    }\n  },\n\n  mounted() {\n    this.model.apikeyOrganisationId = localStorage.organisationId;\n    this.model.apikeyId = localStorage.organisationId;\n    StoreUtils.dispatch(\n      StoreUtils.actions.apiKey.updateApikey,\n      this.model\n    );\n  },\n  computed: {\n    ...mapState({\n      api: (state) => state.apiKey.apiKey,\n      loading: (state) => state.apiKey.loading,\n    }),\n    stage() {\n      return StoreUtils.rootGetters(StoreUtils.getters.auth.getStage)\n    },\n    testLive() {\n      if (!this.stage) return \"Test\"\n      return this.stage.replace(\"PROD\", \"Live\").replace(\"DEV\", \"Test\");\n    },\n    currentOrganisation() {\n      return StoreUtils.rootGetters(\n        StoreUtils.getters.auth.getCurrentOrganization\n      );\n    },\n  },\n};\n</script>\n<style>\n.span-loader {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.btn-login {\n  width: 332px;\n  height: 43px;\n  left: 51px;\n  top: 601px;\n\n  background: var(--primary);\n  border-radius: 5px;\n  border: none;\n  color: white;\n}\n\n.spinner-border {\n  display: inline-block;\n  width: 1rem;\n  height: 1rem;\n  vertical-align: text-bottom;\n  border: 0.25em solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  -webkit-animation: spinner-border 0.75s linear infinite;\n  animation: spinner-border 0.75s linear infinite;\n}\n\n@keyframes spinner-border {\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>"]}]}